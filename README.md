# 简单的面麻计分工具

#### 功能简介

- 记录过程中每一步都有详尽的提示，熟练使用后，记分速度甚至可以比使用点棒更快。
- 输入番数和符数后自动算点，无需查表，可全程脱离点棒使用。
- 对局记录全部留存，可用于数据分析和比赛回顾等用途。

目前暂不支持的功能：

- 流局满贯
- 诈立/诈胡罚分
- 记录副露家及统计副露率

#### 使用说明

​	使用以下命令开启一局新游戏：

```python
python new_game.py
```

使用以下命令计算统计数据：

```python
python stats.py
```

游戏数据将存储在 `data` 文件夹内，统计数据将存储在 `stats` 文件夹内。

​	在开启新游戏后，您会看到类似以下的指令：

```
输入半庄类型[半庄(default)/东风(e)]：
```

输入括号内的英文字母即可选择该选项，`default` 表示不输入则默认为该选项。

​	在对局中，您会看到类似以下的指令：

```
立直家（用空格分隔）[东家(1)，南家(2)，西家(3), 北家(4)]：
```

如果有多个立直家，输入时请用空格分隔，如 `1 3` 表示在本局的方位下，东家和西家立直。

#### 统计数据

目前，统计数据支持以下功能：

- 按个人统计顺位走势、总得点、胡牌率、放铳率、立直率等详细数据
- 以折线图表示每场对局的点数变化
- 各个役种出现的频率
- 跳满以上的大牌统计

#### 使用样例

```
python new_game.py
是否载入未完成的对局[是(y)/否(default)]：
输入对局名称：newgame1
输入对局类型[半庄(default)/东风(e)]：
输入对局规则[M规(m)/雀魂(q)/其他(default)]：m
输入玩家昵称：
东家：zs
南家：ls
西家：ww
北家：zl
{'东家': '张三', '南家': '李四', '西家': '王五', '北家': '赵六'}
玩家全名是否正确？[是(default)/否(n)]：

对局开始!

=========================东1局0本场=========================

当前点数：{'张三': 25000, '李四': 25000, '王五': 25000, '赵六': 25000}，立直棒：0根

开始记录本局，或回退至上一局[开始记录(default)/回退(b)]：

立直家（用空格分隔）[东家(1)，南家(2)，西家(3), 北家(4)]：1
是否流局[是(y)/否(default)]：
胡牌者（一炮多响用空格分隔）[东家(1)，南家(2)，西家(3), 北家(4)]：1
放铳者（留空表示自摸）[东家(1)/南家(2)/西家(3)/北家(4)]：
役种（用空格分隔）[立直(lz), 断幺九(dy), 门前清自摸和(zm), 门风牌(mf), 场风牌(cf), 白(b), 发(f), 中(z), 平和(ph), 一杯口(ybk), 抢杠(qg), 岭上开花(ls), 海底捞月(haid), 河底捞鱼(hed), 一发(yf), 两立直(dbl), 三色同刻(sstk), 三杠子(sangz), 对对和(dd), 三暗刻(sanak), 小三元(xsy), 混老头(hlt), 七对子(qd), 混全带幺九(hq), 一气通贯(yq), 三色同顺(ssts), 二杯口(lbk), 纯全带幺九(cq), 混一色(hys), 清一色(qys), 流局满贯(ljmg), 天和(th), 地和(dh), 大三元(dsy), 四暗刻(siak), 字一色(zys), 绿一色(lys), 清老头(qlt), 国士无双(gs), 小四喜(xsx), 四杠子(sigz), 九莲宝灯(jl), 四暗刻单骑(sd), 国士无双十三面(gsssm), 纯正九莲宝灯(czjl), 大四喜(dsx)]：
lz zm ph
Dora：1
Aka：0
Ura：0
番数[x番(x)/x倍役满(xbym)]：4
符数：20
打点：7800

=========================东1局1本场=========================

当前点数：{'张三': 32800, '李四': 22400, '王五': 22400, '赵六': 22400}，立直棒：0根

开始记录本局，或回退至上一局[开始记录(default)/回退(b)]：

立直家（用空格分隔）[东家(1)，南家(2)，西家(3), 北家(4)]：
是否流局[是(y)/否(default)]：
胡牌者（一炮多响用空格分隔）[东家(1)，南家(2)，西家(3), 北家(4)]：3
放铳者（留空表示自摸）[东家(1)/南家(2)/西家(3)/北家(4)]：2
役种（用空格分隔）[立直(lz), 断幺九(dy), 门前清自摸和(zm), 门风牌(mf), 场风牌(cf), 白(b), 发(f), 中(z), 平和(ph), 一杯口(ybk), 抢杠(qg), 岭上开花(ls), 海底捞月(haid), 河底捞鱼(hed), 一发(yf), 两立直(dbl), 三色同刻(sstk), 三杠子(sangz), 对对和(dd), 三暗刻(sanak), 小三元(xsy), 混老头(hlt), 七对子(qd), 混全带幺九(hq), 一气通贯(yq), 三色同顺(ssts), 二杯口(lbk), 纯全带幺九(cq), 混一色(hys), 清一色(qys), 流局满贯(ljmg), 天和(th), 地和(dh), 大三元(dsy), 四暗刻(siak), 字一色(zys), 绿一色(lys), 清老头(qlt), 国士无双(gs), 小四喜(xsx), 四杠子(sigz), 九莲宝灯(jl), 四暗刻单骑(sd), 国士无双十三面(gsssm), 纯正九莲宝灯(czjl), 大四喜(dsx)]：
b hys
Dora：0
Aka：1
Ura：0
番数[x番(x)/x倍役满(xbym)]：4
符数：30
打点：8000

=========================东2局0本场=========================

当前点数：{'张三': 32800, '李四': 14100, '王五': 30700, '赵六': 22400}，立直棒：0根

开始记录本局，或回退至上一局[开始记录(default)/回退(b)]：

立直家（用空格分隔）[东家(1)，南家(2)，西家(3), 北家(4)]：3
是否流局[是(y)/否(default)]：y
流局类型[荒牌流局(default)/其他途中流局(o)]：
听牌者（用空格分隔）[东家(1)，南家(2)，西家(3), 北家(4)]：3

=========================东3局1本场=========================

当前点数：{'张三': 31800, '李四': 13100, '王五': 29700, '赵六': 24400}，立直棒：1根

开始记录本局，或回退至上一局[开始记录(default)/回退(b)]：

立直家（用空格分隔）[东家(1)，南家(2)，西家(3), 北家(4)]：2 3
是否流局[是(y)/否(default)]：
胡牌者（一炮多响用空格分隔）[东家(1)，南家(2)，西家(3), 北家(4)]：3
放铳者（留空表示自摸）[东家(1)/南家(2)/西家(3)/北家(4)]：2
役种（用空格分隔）[立直(lz), 断幺九(dy), 门前清自摸和(zm), 门风牌(mf), 场风牌(cf), 白(b), 发(f), 中(z), 平和(ph), 一杯口(ybk), 抢杠(qg), 岭上开花(ls), 海底捞月(haid), 河底捞鱼(hed), 一发(yf), 两立直(dbl), 三色同刻(sstk), 三杠子(sangz), 对对和(dd), 三暗刻(sanak), 小三元(xsy), 混老头(hlt), 七对子(qd), 混全带幺九(hq), 一气通贯(yq), 三色同顺(ssts), 二杯口(lbk), 纯全带幺九(cq), 混一色(hys), 清一色(qys), 流局满贯(ljmg), 天和(th), 地和(dh), 大三元(dsy), 四暗刻(siak), 字一色(zys), 绿一色(lys), 清老头(qlt), 国士无双(gs), 小四喜(xsx), 四杠子(sigz), 九莲宝灯(jl), 四暗刻单骑(sd), 国士无双十三面(gsssm), 纯正九莲宝灯(czjl), 大四喜(dsx)]：
lz yf ph
Dora：1
Aka：1
Ura：1
番数[x番(x)/x倍役满(xbym)]：6
符数：30
打点：12000

=========================东4局0本场=========================

当前点数：{'张三': 46100, '李四': 13100, '王五': 29700, '赵六': 11100}，立直棒：0根

开始记录本局，或回退至上一局[开始记录(default)/回退(b)]：

立直家（用空格分隔）[东家(1)，南家(2)，西家(3), 北家(4)]：4
是否流局[是(y)/否(default)]：
胡牌者（一炮多响用空格分隔）[东家(1)，南家(2)，西家(3), 北家(4)]：1
放铳者（留空表示自摸）[东家(1)/南家(2)/西家(3)/北家(4)]：4
役种（用空格分隔）[立直(lz), 断幺九(dy), 门前清自摸和(zm), 门风牌(mf), 场风牌(cf), 白(b), 发(f), 中(z), 平和(ph), 一杯口(ybk), 抢杠(qg), 岭上开花(ls), 海底捞月(haid), 河底捞鱼(hed), 一发(yf), 两立直(dbl), 三色同刻(sstk), 三杠子(sangz), 对对和(dd), 三暗刻(sanak), 小三元(xsy), 混老头(hlt), 七对子(qd), 混全带幺九(hq), 一气通贯(yq), 三色同顺(ssts), 二杯口(lbk), 纯全带幺九(cq), 混一色(hys), 清一色(qys), 流局满贯(ljmg), 天和(th), 地和(dh), 大三元(dsy), 四暗刻(siak), 字一色(zys), 绿一色(lys), 清老头(qlt), 国士无双(gs), 小四喜(xsx), 四杠子(sigz), 九莲宝灯(jl), 四暗刻单骑(sd), 国士无双十三面(gsssm), 纯正九莲宝灯(czjl), 大四喜(dsx)]：
dy
Dora：1
Aka：0
Ura：0
番数[x番(x)/x倍役满(xbym)]：2
符数：30
打点：2900

=========================东4局1本场=========================

当前点数：{'张三': 46100, '李四': 13100, '王五': 25800, '赵六': 15000}，立直棒：0根

开始记录本局，或回退至上一局[开始记录(default)/回退(b)]：

立直家（用空格分隔）[东家(1)，南家(2)，西家(3), 北家(4)]：2
是否流局[是(y)/否(default)]：
胡牌者（一炮多响用空格分隔）[东家(1)，南家(2)，西家(3), 北家(4)]：3
放铳者（留空表示自摸）[东家(1)/南家(2)/西家(3)/北家(4)]：2
役种（用空格分隔）[立直(lz), 断幺九(dy), 门前清自摸和(zm), 门风牌(mf), 场风牌(cf), 白(b), 发(f), 中(z), 平和(ph), 一杯口(ybk), 抢杠(qg), 岭上开花(ls), 海底捞月(haid), 河底捞鱼(hed), 一发(yf), 两立直(dbl), 三色同刻(sstk), 三杠子(sangz), 对对和(dd), 三暗刻(sanak), 小三元(xsy), 混老头(hlt), 七对子(qd), 混全带幺九(hq), 一气通贯(yq), 三色同顺(ssts), 二杯口(lbk), 纯全带幺九(cq), 混一色(hys), 清一色(qys), 流局满贯(ljmg), 天和(th), 地和(dh), 大三元(dsy), 四暗刻(siak), 字一色(zys), 绿一色(lys), 清老头(qlt), 国士无双(gs), 小四喜(xsx), 四杠子(sigz), 九莲宝灯(jl), 四暗刻单骑(sd), 国士无双十三面(gsssm), 纯正九莲宝灯(czjl), 大四喜(dsx)]：
b
Dora：1
Aka：1
Ura：0
番数[x番(x)/x倍役满(xbym)]：3
符数：30
打点：3900

=========================南1局0本场=========================

当前点数：{'张三': 40900, '李四': 18300, '王五': 25800, '赵六': 15000}，立直棒：0根

开始记录本局，或回退至上一局[开始记录(default)/回退(b)]：

立直家（用空格分隔）[东家(1)，南家(2)，西家(3), 北家(4)]：4
是否流局[是(y)/否(default)]：
胡牌者（一炮多响用空格分隔）[东家(1)，南家(2)，西家(3), 北家(4)]：4
放铳者（留空表示自摸）[东家(1)/南家(2)/西家(3)/北家(4)]：
役种（用空格分隔）[立直(lz), 断幺九(dy), 门前清自摸和(zm), 门风牌(mf), 场风牌(cf), 白(b), 发(f), 中(z), 平和(ph), 一杯口(ybk), 抢杠(qg), 岭上开花(ls), 海底捞月(haid), 河底捞鱼(hed), 一发(yf), 两立直(dbl), 三色同刻(sstk), 三杠子(sangz), 对对和(dd), 三暗刻(sanak), 小三元(xsy), 混老头(hlt), 七对子(qd), 混全带幺九(hq), 一气通贯(yq), 三色同顺(ssts), 二杯口(lbk), 纯全带幺九(cq), 混一色(hys), 清一色(qys), 流局满贯(ljmg), 天和(th), 地和(dh), 大三元(dsy), 四暗刻(siak), 字一色(zys), 绿一色(lys), 清老头(qlt), 国士无双(gs), 小四喜(xsx), 四杠子(sigz), 九莲宝灯(jl), 四暗刻单骑(sd), 国士无双十三面(gsssm), 纯正九莲宝灯(czjl), 大四喜(dsx)]：
lz zm
Dora：0
Aka：1
Ura：1
番数[x番(x)/x倍役满(xbym)]：4
符数：30
打点：8000

=========================南2局0本场=========================

当前点数：{'张三': 36900, '李四': 16300, '王五': 23800, '赵六': 23000}，立直棒：0根

开始记录本局，或回退至上一局[开始记录(default)/回退(b)]：

立直家（用空格分隔）[东家(1)，南家(2)，西家(3), 北家(4)]：
是否流局[是(y)/否(default)]：y
流局类型[荒牌流局(default)/其他途中流局(o)]：
听牌者（用空格分隔）[东家(1)，南家(2)，西家(3), 北家(4)]：3

=========================南3局1本场=========================

当前点数：{'张三': 35900, '李四': 15300, '王五': 22800, '赵六': 26000}，立直棒：0根

开始记录本局，或回退至上一局[开始记录(default)/回退(b)]：

立直家（用空格分隔）[东家(1)，南家(2)，西家(3), 北家(4)]：3
是否流局[是(y)/否(default)]：
胡牌者（一炮多响用空格分隔）[东家(1)，南家(2)，西家(3), 北家(4)]：3
放铳者（留空表示自摸）[东家(1)/南家(2)/西家(3)/北家(4)]：4
役种（用空格分隔）[立直(lz), 断幺九(dy), 门前清自摸和(zm), 门风牌(mf), 场风牌(cf), 白(b), 发(f), 中(z), 平和(ph), 一杯口(ybk), 抢杠(qg), 岭上开花(ls), 海底捞月(haid), 河底捞鱼(hed), 一发(yf), 两立直(dbl), 三色同刻(sstk), 三杠子(sangz), 对对和(dd), 三暗刻(sanak), 小三元(xsy), 混老头(hlt), 七对子(qd), 混全带幺九(hq), 一气通贯(yq), 三色同顺(ssts), 二杯口(lbk), 纯全带幺九(cq), 混一色(hys), 清一色(qys), 流局满贯(ljmg), 天和(th), 地和(dh), 大三元(dsy), 四暗刻(siak), 字一色(zys), 绿一色(lys), 清老头(qlt), 国士无双(gs), 小四喜(xsx), 四杠子(sigz), 九莲宝灯(jl), 四暗刻单骑(sd), 国士无双十三面(gsssm), 纯正九莲宝灯(czjl), 大四喜(dsx)]：
lz
Dora：1
Aka：0
Ura：0
番数[x番(x)/x倍役满(xbym)]：2
符数：40
打点：2600

=========================南4局0本场=========================

当前点数：{'张三': 38800, '李四': 12400, '王五': 22800, '赵六': 26000}，立直棒：0根

开始记录本局，或回退至上一局[开始记录(default)/回退(b)]：

立直家（用空格分隔）[东家(1)，南家(2)，西家(3), 北家(4)]：4
是否流局[是(y)/否(default)]：
胡牌者（一炮多响用空格分隔）[东家(1)，南家(2)，西家(3), 北家(4)]：3
放铳者（留空表示自摸）[东家(1)/南家(2)/西家(3)/北家(4)]：4
役种（用空格分隔）[立直(lz), 断幺九(dy), 门前清自摸和(zm), 门风牌(mf), 场风牌(cf), 白(b), 发(f), 中(z), 平和(ph), 一杯口(ybk), 抢杠(qg), 岭上开花(ls), 海底捞月(haid), 河底捞鱼(hed), 一发(yf), 两立直(dbl), 三色同刻(sstk), 三杠子(sangz), 对对和(dd), 三暗刻(sanak), 小三元(xsy), 混老头(hlt), 七对子(qd), 混全带幺九(hq), 一气通贯(yq), 三色同顺(ssts), 二杯口(lbk), 纯全带幺九(cq), 混一色(hys), 清一色(qys), 流局满贯(ljmg), 天和(th), 地和(dh), 大三元(dsy), 四暗刻(siak), 字一色(zys), 绿一色(lys), 清老头(qlt), 国士无双(gs), 小四喜(xsx), 四杠子(sigz), 九莲宝灯(jl), 四暗刻单骑(sd), 国士无双十三面(gsssm), 纯正九莲宝灯(czjl), 大四喜(dsx)]：
f z
Dora：1
Aka：1
Ura：0
番数[x番(x)/x倍役满(xbym)]：4
符数：30
打点：8000

对局结束!

最终点数：{'张三': 38800, '李四': 21400, '王五': 13800, '赵六': 26000}
```

```
newgame1.json
{
    "名称": "newgame1",
    "游戏类型": "半庄",
    "规则": "M规",
    "玩家": {
        "东家": "张三",
        "南家": "李四",
        "西家": "王五",
        "北家": "赵六"
    },
    "对局结果": [
        {
            "场次": "东1局0本场",
            "立直家": [
                "张三"
            ],
            "胡牌": [
                {
                    "胡牌者": "张三",
                    "是否自摸": "是",
                    "放铳者": "",
                    "役种": [
                        "立直",
                        "门前清自摸和",
                        "平和"
                    ],
                    "Dora": 1,
                    "Aka": 0,
                    "Ura": 0,
                    "番数": 4,
                    "符数": 20,
                    "打点": 7800
                }
            ],
            "局前点数": {
                "张三": 25000,
                "李四": 25000,
                "王五": 25000,
                "赵六": 25000
            },
            "局后点数": {
                "张三": 32800,
                "李四": 22400,
                "王五": 22400,
                "赵六": 22400
            }
        },
        {
            "场次": "东1局1本场",
            "立直家": [],
            "胡牌": [
                {
                    "胡牌者": "王五",
                    "是否自摸": "否",
                    "放铳者": "李四",
                    "役种": [
                        "白",
                        "混一色"
                    ],
                    "Dora": 0,
                    "Aka": 1,
                    "Ura": 0,
                    "番数": 4,
                    "符数": 30,
                    "打点": 8000
                }
            ],
            "局前点数": {
                "张三": 32800,
                "李四": 22400,
                "王五": 22400,
                "赵六": 22400
            },
            "局后点数": {
                "张三": 32800,
                "李四": 14100,
                "王五": 30700,
                "赵六": 22400
            }
        },
        {
            "场次": "东2局0本场",
            "立直家": [
                "赵六"
            ],
            "胡牌": [],
            "局前点数": {
                "张三": 32800,
                "李四": 14100,
                "王五": 30700,
                "赵六": 22400
            },
            "局后点数": {
                "张三": 31800,
                "李四": 13100,
                "王五": 29700,
                "赵六": 24400
            }
        },
        {
            "场次": "东3局1本场",
            "立直家": [
                "赵六",
                "张三"
            ],
            "胡牌": [
                {
                    "胡牌者": "张三",
                    "是否自摸": "否",
                    "放铳者": "赵六",
                    "役种": [
                        "立直",
                        "一发",
                        "平和"
                    ],
                    "Dora": 1,
                    "Aka": 1,
                    "Ura": 1,
                    "番数": 6,
                    "符数": 30,
                    "打点": 12000
                }
            ],
            "局前点数": {
                "张三": 31800,
                "李四": 13100,
                "王五": 29700,
                "赵六": 24400
            },
            "局后点数": {
                "张三": 46100,
                "李四": 13100,
                "王五": 29700,
                "赵六": 11100
            }
        },
        {
            "场次": "东4局0本场",
            "立直家": [
                "王五"
            ],
            "胡牌": [
                {
                    "胡牌者": "赵六",
                    "是否自摸": "否",
                    "放铳者": "王五",
                    "役种": [
                        "断幺九"
                    ],
                    "Dora": 1,
                    "Aka": 0,
                    "Ura": 0,
                    "番数": 2,
                    "符数": 30,
                    "打点": 2900
                }
            ],
            "局前点数": {
                "张三": 46100,
                "李四": 13100,
                "王五": 29700,
                "赵六": 11100
            },
            "局后点数": {
                "张三": 46100,
                "李四": 13100,
                "王五": 25800,
                "赵六": 15000
            }
        },
        {
            "场次": "东4局1本场",
            "立直家": [
                "张三"
            ],
            "胡牌": [
                {
                    "胡牌者": "李四",
                    "是否自摸": "否",
                    "放铳者": "张三",
                    "役种": [
                        "白"
                    ],
                    "Dora": 1,
                    "Aka": 1,
                    "Ura": 0,
                    "番数": 3,
                    "符数": 30,
                    "打点": 3900
                }
            ],
            "局前点数": {
                "张三": 46100,
                "李四": 13100,
                "王五": 25800,
                "赵六": 15000
            },
            "局后点数": {
                "张三": 40900,
                "李四": 18300,
                "王五": 25800,
                "赵六": 15000
            }
        },
        {
            "场次": "南1局0本场",
            "立直家": [
                "赵六"
            ],
            "胡牌": [
                {
                    "胡牌者": "赵六",
                    "是否自摸": "是",
                    "放铳者": "",
                    "役种": [
                        "立直",
                        "门前清自摸和"
                    ],
                    "Dora": 0,
                    "Aka": 1,
                    "Ura": 1,
                    "番数": 4,
                    "符数": 30,
                    "打点": 8000
                }
            ],
            "局前点数": {
                "张三": 40900,
                "李四": 18300,
                "王五": 25800,
                "赵六": 15000
            },
            "局后点数": {
                "张三": 36900,
                "李四": 16300,
                "王五": 23800,
                "赵六": 23000
            }
        },
        {
            "场次": "南2局0本场",
            "立直家": [],
            "胡牌": [],
            "局前点数": {
                "张三": 36900,
                "李四": 16300,
                "王五": 23800,
                "赵六": 23000
            },
            "局后点数": {
                "张三": 35900,
                "李四": 15300,
                "王五": 22800,
                "赵六": 26000
            }
        },
        {
            "场次": "南3局1本场",
            "立直家": [
                "张三"
            ],
            "胡牌": [
                {
                    "胡牌者": "张三",
                    "是否自摸": "否",
                    "放铳者": "李四",
                    "役种": [
                        "立直"
                    ],
                    "Dora": 1,
                    "Aka": 0,
                    "Ura": 0,
                    "番数": 2,
                    "符数": 40,
                    "打点": 2600
                }
            ],
            "局前点数": {
                "张三": 35900,
                "李四": 15300,
                "王五": 22800,
                "赵六": 26000
            },
            "局后点数": {
                "张三": 38800,
                "李四": 12400,
                "王五": 22800,
                "赵六": 26000
            }
        },
        {
            "场次": "南4局0本场",
            "立直家": [
                "王五"
            ],
            "胡牌": [
                {
                    "胡牌者": "李四",
                    "是否自摸": "否",
                    "放铳者": "王五",
                    "役种": [
                        "发",
                        "中"
                    ],
                    "Dora": 1,
                    "Aka": 1,
                    "Ura": 0,
                    "番数": 4,
                    "符数": 30,
                    "打点": 8000
                }
            ],
            "局前点数": {
                "张三": 38800,
                "李四": 12400,
                "王五": 22800,
                "赵六": 26000
            },
            "局后点数": {
                "张三": 38800,
                "李四": 21400,
                "王五": 13800,
                "赵六": 26000
            }
        }
    ],
    "最终点数": {
        "张三": 38800,
        "李四": 21400,
        "王五": 13800,
        "赵六": 26000
    }
}
```

